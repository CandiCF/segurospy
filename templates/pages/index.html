{% extends "base.html" %}

{% block content %}
<!-- Hero Section Vibrante -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1>
                Tu CorredurÃ­a de Seguros en la
                <span class="gradient-text">Sierra de Madrid</span> ğŸ’œ
            </h1>
            <p class="hero-subtitle">
                Especialistas en seguros para Villalba, Galapagar, Alpedrete, Torrelodones
                y toda la Sierra Noroeste. <span class="highlight">Comparamos mÃ¡s de 20 aseguradoras</span>
                para encontrarte el mejor precio. Â¡Ahorra hasta un 40%! âœ¨
            </p>

            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">20+</span>
                    <span class="stat-label">Aseguradoras</span>
                </div>
                <div class="stat">
                    <span class="stat-number">287â‚¬</span>
                    <span class="stat-label">Ahorro medio</span>
                </div>
                <div class="stat">
                    <span class="stat-number">4.9â˜…</span>
                    <span class="stat-label">ValoraciÃ³n</span>
                </div>
            </div>

            <div class="hero-cta">
                <a href="/comparador" class="btn btn-primary btn-lg">
                    ğŸ” Comparar Seguros
                </a>
                <a href="tel:+34647801213" class="btn btn-outline btn-lg">
                    ğŸ“ 647 801 213
                </a>
            </div>
        </div>

        <div class="hero-image">
            <div class="hero-visual">
                ğŸ›¡ï¸
            </div>
        </div>
    </div>
</section>

<!-- Servicios con tarjetas coloridas -->
<section class="services">
    <div class="container">
        <h2 class="section-title">Nuestros Seguros ğŸ’–</h2>
        <p class="section-subtitle">ProtecciÃ³n completa para ti y tu familia en la Sierra de Madrid</p>

        <div class="services-grid">
            <a href="/seguro-hogar" class="service-card">
                <span class="service-icon">ğŸ </span>
                <h3>Seguro de Hogar</h3>
                <p>Protege tu hogar en la Sierra. Coberturas completas.</p>
            </a>

            <a href="/seguro-coche" class="service-card">
                <span class="service-icon">ğŸš—</span>
                <h3>Seguro de Coche</h3>
                <p>Terceros, todo riesgo y franquicia al mejor precio.</p>
            </a>

            <a href="/seguro-vida" class="service-card">
                <span class="service-icon">ğŸ’š</span>
                <h3>Seguro de Vida</h3>
                <p>Garantiza el futuro de los que mÃ¡s quieres.</p>
            </a>

            <a href="/seguro-decesos" class="service-card">
                <span class="service-icon">ğŸ•Šï¸</span>
                <h3>Seguro de Decesos</h3>
                <p>Tranquilidad para toda la familia.</p>
            </a>

            <a href="/seguro-salud" class="service-card">
                <span class="service-icon">ğŸ¥</span>
                <h3>Seguro de Salud</h3>
                <p>Acceso a los mejores especialistas sin esperas.</p>
            </a>

            <a href="/comparador" class="service-card service-card-cta">
                <span class="service-icon">âœ¨</span>
                <h3>Comparador Gratis</h3>
                <p>Encuentra el mejor precio en 2 minutos.</p>
            </a>
        </div>
    </div>
</section>

<!-- Por quÃ© elegirnos -->
<section class="why-us">
    <div class="container">
        <h2 class="section-title">Â¿Por quÃ© SegurosPy? ğŸ’œ</h2>
        <p class="section-subtitle">Tu agente de seguros de confianza en la Sierra de Madrid</p>

        <div class="features-grid">
            <div class="feature">
                <div class="feature-icon">ğŸ’°</div>
                <div>
                    <h3>Ahorro Garantizado</h3>
                    <p>Comparamos mÃ¡s de 20 aseguradoras para encontrarte el mejor precio. Nuestros clientes ahorran una
                        media de 287â‚¬ al aÃ±o.</p>
                </div>
            </div>

            <div class="feature">
                <div class="feature-icon">ğŸ‘©</div>
                <div>
                    <h3>AtenciÃ³n Cercana</h3>
                    <p>Somos de aquÃ­, conocemos la zona. Te atendemos personalmente en Villalba y alrededores. Â¡Ven a
                        vernos!</p>
                </div>
            </div>

            <div class="feature">
                <div class="feature-icon">ğŸ</div>
                <div>
                    <h3>100% Gratuito</h3>
                    <p>Nuestro servicio de asesoramiento y comparaciÃ³n es totalmente gratuito. Sin compromiso ni letra
                        pequeÃ±a.</p>
                </div>
            </div>

            <div class="feature">
                <div class="feature-icon">âš¡</div>
                <div>
                    <h3>Respuesta RÃ¡pida</h3>
                    <p>Te respondemos en menos de 24 horas con una comparativa personalizada de las mejores opciones.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Formulario de Contacto -->
<section class="contact-section" id="contacto">
    <div class="container">
        <h2 class="section-title">Solicita tu Presupuesto Gratis ğŸŒŸ</h2>
        <p class="section-subtitle">Te contactamos en menos de 24 horas. Â¡Sin compromiso!</p>

        <form id="contact-form" class="contact-form">
            <div class="form-group">
                <label for="nombre">Nombre completo *</label>
                <input type="text" id="nombre" name="nombre" required minlength="2" placeholder="Tu nombre">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" name="email" required placeholder="tu@email.com">
                </div>

                <div class="form-group">
                    <label for="telefono">TelÃ©fono *</label>
                    <input type="tel" id="telefono" name="telefono" required minlength="9" placeholder="612 345 678">
                </div>
            </div>

            <div class="form-group">
                <label for="tipo_seguro">Tipo de seguro *</label>
                <select id="tipo_seguro" name="tipo_seguro" required>
                    <option value="">Selecciona...</option>
                    <option value="hogar">ğŸ  Seguro de Hogar</option>
                    <option value="auto">ğŸš— Seguro de Coche</option>
                    <option value="vida">ğŸ’š Seguro de Vida</option>
                    <option value="decesos">ğŸ•Šï¸ Seguro de Decesos</option>
                    <option value="salud">ğŸ¥ Seguro de Salud</option>
                    <option value="mascotas">ğŸ¾ Seguro de Mascotas</option>
                    <option value="otro">ğŸ“‹ Otro / Consulta General</option>
                </select>
            </div>

            <div class="form-group">
                <label for="mensaje">Mensaje (opcional)</label>
                <textarea id="mensaje" name="mensaje" rows="4"
                    placeholder="CuÃ©ntanos mÃ¡s sobre lo que necesitas..."></textarea>
            </div>

            <div class="form-group checkbox">
                <input type="checkbox" id="privacidad" name="privacidad" required>
                <label for="privacidad">
                    He leÃ­do y acepto la <a href="/politica-privacidad" target="_blank">polÃ­tica de privacidad</a> *
                </label>
            </div>

            <button type="submit" class="btn btn-primary btn-block btn-lg">
                âœ¨ Solicitar Presupuesto Gratis
            </button>
        </form>
    </div>
</section>

<!-- Zonas de Servicio -->
<section class="zones">
    <div class="container">
        <h2 class="section-title">Sierra de Madrid Noroeste ğŸ“</h2>
        <p class="section-subtitle">Tu corredurÃ­a de seguros local - Â¡Estamos cerca de ti!</p>

        <div class="zones-list">
            <span class="zone-tag">â­ Collado Villalba</span>
            <span class="zone-tag">ğŸ”ï¸ Galapagar</span>
            <span class="zone-tag">ğŸŒ² Alpedrete</span>
            <span class="zone-tag">ğŸ¡ Torrelodones</span>
            <span class="zone-tag">â›°ï¸ Guadarrama</span>
            <span class="zone-tag">ğŸï¸ Los Molinos</span>
            <span class="zone-tag">ğŸŒ¿ Cercedilla</span>
            <span class="zone-tag">ğŸŒ³ Moralzarzal</span>
            <span class="zone-tag">ğŸ”ï¸ Navacerrada</span>
            <span class="zone-tag">ğŸŒ² El Escorial</span>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts_extra %}
<script>
    // Manejar envÃ­o del formulario
    document.getElementById('contact-form').addEventListener('submit', async function (e) {
        e.preventDefault();

        const btn = this.querySelector('button[type="submit"]');
        const originalText = btn.innerHTML;
        btn.innerHTML = 'â³ Enviando...';
        btn.disabled = true;

        const formData = {
            nombre: document.getElementById('nombre').value,
            email: document.getElementById('email').value,
            telefono: document.getElementById('telefono').value,
            tipo_seguro: document.getElementById('tipo_seguro').value,
            mensaje: document.getElementById('mensaje').value,
            asunto: document.getElementById('tipo_seguro').value,
            acepta_privacidad: document.getElementById('privacidad').checked
        };

        try {
            const response = await fetch('/api/leads/contacto', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            const data = await response.json();

            if (data.success) {
                // Mostrar mensaje de Ã©xito
                btn.innerHTML = 'ğŸ‰ Â¡Enviado!';
                btn.style.background = 'linear-gradient(135deg, #32CD32, #7FFF00)';

                // Confetti effect simple
                createConfetti();

                setTimeout(() => {
                    alert('ğŸ‰ Â¡Gracias! Hemos recibido tu solicitud. Te contactaremos muy pronto.');
                    this.reset();
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                    btn.disabled = false;
                }, 1000);
            } else {
                btn.innerHTML = originalText;
                btn.disabled = false;
                alert('Error: ' + (data.detail || 'Ha ocurrido un error'));
            }
        } catch (error) {
            console.error('Error:', error);
            btn.innerHTML = originalText;
            btn.disabled = false;
            alert('Error al enviar el formulario. IntÃ©ntalo de nuevo.');
        }
    });

    // Confetti simple
    function createConfetti() {
        const colors = ['#FF6B6B', '#FF69B4', '#32CD32', '#40E0D0', '#FFD93D'];
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.style.cssText = `
            position: fixed;
            width: 10px;
            height: 10px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            left: ${Math.random() * 100}vw;
            top: -10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            animation: fall ${2 + Math.random() * 2}s linear forwards;
        `;
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 4000);
        }
    }

    // AÃ±adir keyframes para confetti
    const style = document.createElement('style');
    style.textContent = `
    @keyframes fall {
        to {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
        }
    }
`;
    document.head.appendChild(style);
</script>
{% endblock %}