{% extends "base.html" %}

{% block content %}
<!-- Hero con Imagen -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1>
                Tu CorredurÃ­a de Seguros en la
                <span class="gradient-text">Sierra de Madrid</span> ğŸ’œ
            </h1>
            <p class="hero-subtitle">
                Especialistas en seguros para Villalba, Galapagar, Alpedrete, Torrelodones
                y toda la Sierra Noroeste. <span class="highlight">Comparamos mÃ¡s de 20 aseguradoras</span>
                para encontrarte el mejor precio. Â¡Ahorra hasta un 40%! âœ¨
            </p>

            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">20+</span>
                    <span class="stat-label">Aseguradoras</span>
                </div>
                <div class="stat">
                    <span class="stat-number">287â‚¬</span>
                    <span class="stat-label">Ahorro medio</span>
                </div>
                <div class="stat">
                    <span class="stat-number">4.9â˜…</span>
                    <span class="stat-label">ValoraciÃ³n</span>
                </div>
            </div>

            <div class="hero-cta">
                <a href="/comparador" class="btn btn-primary btn-lg">
                    ğŸ” Comparar Seguros
                </a>
                <a href="tel:+34647801213" class="btn btn-outline btn-lg">
                    ğŸ“ 647 801 213
                </a>
            </div>
        </div>

        <div class="hero-image">
            <img src="https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=600&h=600&fit=crop"
                alt="Familia feliz protegida" class="hero-img">
        </div>
    </div>
</section>

<!-- PRODUCTOS ESTRELLA -->
<section class="featured-products">
    <div class="container">
        <h2 class="section-title">Nuestros Seguros Estrella â­</h2>
        <p class="section-subtitle">Productos exclusivos diseÃ±ados pensando en ti</p>

        <div class="featured-grid">
            <!-- Seguro Exclusivo Mujer -->
            <a href="/seguro-mujer" class="featured-card">
                <img src="https://images.unsplash.com/photo-1571844307880-751c6d86f3f3?w=500&h=300&fit=crop"
                    alt="Mujer sonriendo" class="featured-img">
                <div class="featured-content">
                    <span class="featured-badge">ğŸ’œ Exclusivo para Mujeres</span>
                    <h3>Seguro Exclusivo para Ti</h3>
                    <p>Un seguro completo que ofrece seguridad econÃ³mica y asistencia en vida diaria. Pensado para ti,
                        trabajes o no.</p>

                    <ul class="featured-benefits">
                        <li>Fallecimiento e invalidez permanente</li>
                        <li>Asistencia oncolÃ³gica completa</li>
                        <li>Auxiliar a domicilio y cuidado de hijos</li>
                        <li>GestiÃ³n de sucesiones incluida</li>
                        <li>IndemnizaciÃ³n por cÃ¡ncer de mama</li>
                        <li>Bonus 10-20% por no siniestralidad</li>
                    </ul>

                    <p class="featured-price">Muy econÃ³mico <span>Â· 6 coberturas completas</span></p>
                </div>
            </a>

            <!-- Seguro de Decesos -->
            <a href="/seguro-decesos" class="featured-card">
                <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=500&h=300&fit=crop"
                    alt="Familia unida" class="featured-img">
                <div class="featured-content">
                    <span class="featured-badge">ğŸ•Šï¸ Tranquilidad Familiar</span>
                    <h3>Seguro de Decesos</h3>
                    <p>Dale tranquilidad a tu familia. Nos encargamos de todo para que tus seres queridos no tengan que
                        preocuparse de nada en los momentos mÃ¡s difÃ­ciles.</p>

                    <ul class="featured-benefits">
                        <li>Servicio completo 24 horas</li>
                        <li>Gestiones legales y administrativas</li>
                        <li>Cobertura en toda EspaÃ±a</li>
                        <li>Sin lÃ­mite de edad para contratar</li>
                        <li>Traslado nacional e internacional</li>
                        <li>Asistencia familiar incluida</li>
                    </ul>

                    <p class="featured-price">Desde 5â‚¬/mes <span>Â· Familiar o individual</span></p>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- Servicios -->
<section class="services">
    <div class="container">
        <h2 class="section-title">Todos Nuestros Seguros ğŸ’–</h2>
        <p class="section-subtitle">ProtecciÃ³n completa para ti y tu familia en la Sierra de Madrid</p>

        <div class="services-grid">
            <a href="/seguro-hogar" class="service-card">
                <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=300&h=200&fit=crop"
                    alt="Casa moderna" class="service-img">
                <h3>ğŸ  Seguro de Hogar</h3>
                <p>Protege tu hogar en la Sierra. Coberturas completas desde 15â‚¬/mes.</p>
            </a>

            <a href="/seguro-coche" class="service-card">
                <img src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=300&h=200&fit=crop"
                    alt="Coche circulando" class="service-img">
                <h3>ğŸš— Seguro de Coche</h3>
                <p>Terceros, todo riesgo y franquicia al mejor precio.</p>
            </a>

            <a href="/seguro-vida" class="service-card">
                <img src="https://images.unsplash.com/photo-1491438590914-bc09fcaaf77a?w=300&h=200&fit=crop"
                    alt="Familia feliz" class="service-img">
                <h3>ğŸ’š Seguro de Vida</h3>
                <p>Garantiza el futuro de los que mÃ¡s quieres.</p>
            </a>

            <a href="/seguro-salud" class="service-card">
                <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=300&h=200&fit=crop"
                    alt="MÃ©dico sonriendo" class="service-img">
                <h3>ğŸ¥ Seguro de Salud</h3>
                <p>Acceso a los mejores especialistas sin esperas.</p>
            </a>

            <a href="/seguro-mascotas" class="service-card">
                <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=300&h=200&fit=crop"
                    alt="Perro feliz" class="service-img">
                <h3>ğŸ¾ Seguro de Mascotas</h3>
                <p>ProtecciÃ³n veterinaria para tu mejor amigo.</p>
            </a>

            <a href="/comparador" class="service-card service-card-cta">
                <div class="cta-content">
                    <span class="cta-icon">âœ¨</span>
                    <h3>Comparador Gratis</h3>
                    <p>Encuentra el mejor precio en 2 minutos.</p>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- Por quÃ© elegirnos -->
<section class="why-us">
    <div class="container">
        <h2 class="section-title">Â¿Por quÃ© SegurosPy? ğŸ’œ</h2>
        <p class="section-subtitle">Tu agente de seguros de confianza en la Sierra de Madrid</p>

        <div class="features-grid">
            <div class="feature">
                <img src="https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=120&h=120&fit=crop"
                    alt="Ahorro" class="feature-img">
                <div>
                    <h3>Ahorro Garantizado ğŸ’°</h3>
                    <p>Comparamos mÃ¡s de 20 aseguradoras para encontrarte el mejor precio. Nuestros clientes ahorran una
                        media de 287â‚¬ al aÃ±o.</p>
                </div>
            </div>

            <div class="feature">
                <img src="https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=120&h=120&fit=crop"
                    alt="AtenciÃ³n personalizada" class="feature-img">
                <div>
                    <h3>AtenciÃ³n Cercana ğŸ‘©</h3>
                    <p>Somos de aquÃ­, conocemos la zona. Te atendemos personalmente en Villalba y alrededores. Â¡Ven a
                        vernos!</p>
                </div>
            </div>

            <div class="feature">
                <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=120&h=120&fit=crop"
                    alt="Servicio gratuito" class="feature-img">
                <div>
                    <h3>100% Gratuito ğŸ</h3>
                    <p>Nuestro servicio de asesoramiento y comparaciÃ³n es totalmente gratuito. Sin compromiso ni letra
                        pequeÃ±a.</p>
                </div>
            </div>

            <div class="feature">
                <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=120&h=120&fit=crop"
                    alt="Respuesta rÃ¡pida" class="feature-img">
                <div>
                    <h3>Respuesta RÃ¡pida âš¡</h3>
                    <p>Te respondemos en menos de 24 horas con una comparativa personalizada de las mejores opciones.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- GalerÃ­a Sierra de Madrid -->
<section class="gallery">
    <div class="container">
        <h2 class="section-title">Nuestra Sierra ğŸ”ï¸</h2>
        <p class="section-subtitle">Protegemos a las familias del Noroeste de Madrid</p>

        <div class="gallery-grid">
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop"
                    alt="MontaÃ±as de Guadarrama">
                <span class="gallery-label">Sierra de Guadarrama</span>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=400&h=300&fit=crop"
                    alt="Casa en la sierra">
                <span class="gallery-label">Hogares Protegidos</span>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1581579438747-1dc8d17bbce4?w=400&h=300&fit=crop"
                    alt="Familia sonriendo">
                <span class="gallery-label">Familias Felices</span>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop"
                    alt="Llaves de casa">
                <span class="gallery-label">Tu Nuevo Hogar</span>
            </div>
        </div>
    </div>
</section>

<!-- Formulario de Contacto -->
<section class="contact-section" id="contacto">
    <div class="container">
        <h2 class="section-title">Solicita tu Presupuesto Gratis ğŸŒŸ</h2>
        <p class="section-subtitle">Te contactamos en menos de 24 horas. Â¡Sin compromiso!</p>

        <div class="contact-wrapper">
            <div class="contact-image">
                <img src="https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=500&h=600&fit=crop"
                    alt="Asesora de seguros sonriendo">
                <div class="contact-badge">
                    <span>ğŸ’¬</span>
                    <p>Â¡Hola! Soy tu asesora personal. CuÃ©ntame quÃ© necesitas.</p>
                </div>
            </div>

            <form id="contact-form" class="contact-form">
                <div class="form-group">
                    <label for="nombre">Nombre completo *</label>
                    <input type="text" id="nombre" name="nombre" required minlength="2" placeholder="Tu nombre">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Correo electrÃ³nico *</label>
                        <input type="email" id="email" name="email" required placeholder="tu@correo.com">
                    </div>

                    <div class="form-group">
                        <label for="telefono">TelÃ©fono *</label>
                        <input type="tel" id="telefono" name="telefono" required minlength="9"
                            placeholder="612 345 678">
                    </div>
                </div>

                <div class="form-group">
                    <label for="tipo_seguro">Tipo de seguro *</label>
                    <select id="tipo_seguro" name="tipo_seguro" required>
                        <option value="">Selecciona...</option>
                        <option value="mujer">ğŸ’œ Seguro Exclusivo Mujer â­</option>
                        <option value="decesos">ğŸ•Šï¸ Seguro de Decesos â­</option>
                        <option value="hogar">ğŸ  Seguro de Hogar</option>
                        <option value="auto">ğŸš— Seguro de Coche</option>
                        <option value="vida">ğŸ’š Seguro de Vida</option>
                        <option value="salud">ğŸ¥ Seguro de Salud</option>
                        <option value="mascotas">ğŸ¾ Seguro de Mascotas</option>
                        <option value="otro">ğŸ“‹ Otro / Consulta General</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="mensaje">Mensaje (opcional)</label>
                    <textarea id="mensaje" name="mensaje" rows="4"
                        placeholder="CuÃ©ntanos mÃ¡s sobre lo que necesitas..."></textarea>
                </div>

                <div class="form-group checkbox">
                    <input type="checkbox" id="privacidad" name="privacidad" required>
                    <label for="privacidad">
                        He leÃ­do y acepto la <a href="/politica-privacidad" target="_blank">polÃ­tica de privacidad</a> *
                    </label>
                </div>

                <button type="submit" class="btn btn-primary btn-block btn-lg">
                    âœ¨ Solicitar Presupuesto Gratis
                </button>
            </form>
        </div>
    </div>
</section>

<!-- Zonas de Servicio -->
<section class="zones">
    <div class="container">
        <h2 class="section-title">Sierra de Madrid Noroeste ğŸ“</h2>
        <p class="section-subtitle">Tu corredurÃ­a de seguros local - Â¡Estamos cerca de ti!</p>

        <div class="zones-list">
            <span class="zone-tag">â­ Collado Villalba</span>
            <span class="zone-tag">ğŸ”ï¸ Galapagar</span>
            <span class="zone-tag">ğŸŒ² Alpedrete</span>
            <span class="zone-tag">ğŸ¡ Torrelodones</span>
            <span class="zone-tag">â›°ï¸ Guadarrama</span>
            <span class="zone-tag">ğŸï¸ Los Molinos</span>
            <span class="zone-tag">ğŸŒ¿ Cercedilla</span>
            <span class="zone-tag">ğŸŒ³ Moralzarzal</span>
            <span class="zone-tag">ğŸ”ï¸ Navacerrada</span>
            <span class="zone-tag">ğŸ° El Escorial</span>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts_extra %}
<script>
    // Manejar envÃ­o del formulario
    document.getElementById('contact-form').addEventListener('submit', async function (e) {
        e.preventDefault();

        const btn = this.querySelector('button[type="submit"]');
        const textoOriginal = btn.innerHTML;
        btn.innerHTML = 'â³ Enviando...';
        btn.disabled = true;

        const formData = {
            nombre: document.getElementById('nombre').value,
            email: document.getElementById('email').value,
            telefono: document.getElementById('telefono').value,
            tipo_seguro: document.getElementById('tipo_seguro').value,
            mensaje: document.getElementById('mensaje').value,
            asunto: document.getElementById('tipo_seguro').value,
            acepta_privacidad: document.getElementById('privacidad').checked
        };

        try {
            const response = await fetch('/api/leads/contacto', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            const data = await response.json();

            if (data.success) {
                btn.innerHTML = 'ğŸ‰ Â¡Enviado!';
                btn.style.background = 'linear-gradient(135deg, #7FFF00, #32CD32)';
                crearConfeti();

                setTimeout(() => {
                    alert('ğŸ‰ Â¡Gracias! Hemos recibido tu solicitud. Te contactaremos muy pronto.');
                    this.reset();
                    btn.innerHTML = textoOriginal;
                    btn.style.background = '';
                    btn.disabled = false;
                }, 1000);
            } else {
                btn.innerHTML = textoOriginal;
                btn.disabled = false;
                alert('Error: ' + (data.detail || 'Ha ocurrido un error'));
            }
        } catch (error) {
            console.error('Error:', error);
            btn.innerHTML = textoOriginal;
            btn.disabled = false;
            alert('Error al enviar el formulario. IntÃ©ntalo de nuevo.');
        }
    });

    // Efecto confeti
    function crearConfeti() {
        const colores = ['#7FFF00', '#FFD700', '#FF6B00', '#00BFFF', '#9B59B6', '#FF00FF'];
        for (let i = 0; i < 80; i++) {
            const confeti = document.createElement('div');
            confeti.style.cssText = `
            position: fixed;
            width: ${5 + Math.random() * 10}px;
            height: ${5 + Math.random() * 10}px;
            background: ${colores[Math.floor(Math.random() * colores.length)]};
            left: ${Math.random() * 100}vw;
            top: -10px;
            border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
            pointer-events: none;
            z-index: 9999;
            animation: caer ${2 + Math.random() * 2}s linear forwards;
        `;
            document.body.appendChild(confeti);
            setTimeout(() => confeti.remove(), 4000);
        }
    }

    const estilo = document.createElement('style');
    estilo.textContent = `
    @keyframes caer {
        to {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
        }
    }
`;
    document.head.appendChild(estilo);
</script>
{% endblock %}